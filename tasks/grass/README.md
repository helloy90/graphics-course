# Трава

Название задачи говорит само за себя

## Перед началом

1. Скопируйте в эту папку ваш текущий рендерер из предыдущих домашек.
Желательно, чтобы в нём были решения [terrain](/tasks/terrain/) и [csm](/tasks/csm/).

## Задание

Добавьте в ваш рендерер траву, растущую на террейне.
Если у вас не террейна чтобы на нём рассаживать траву, рассаживайте её по плоскости.
В минимальном виде решение задачи должно:
- расставлять травинки в ограниченном радиусе от игрока на GPU при помощи компьют-шейдера;
- рисовать все травинки одним вызовом при помощи инстансинга (либо пачками по N травинок);
- рисовать каждую травинку либо как процедурно создаваемую на лету полигональную модель, либо как биллборд с текстурой;
- генерировать при помощи шума Перлина ветер и влиять им на траву при отрисовке.

Дополнительные баллы можно получить за очень большую дистанцию прорисовки с <1ms на отрисовку всей травы.
Для этого предлагается попробовать:
- Z-препасс для травы;
- отрисовку травинок по клеткам и сортировку клеток по расстоянию до камеры;
- фрустум куллинг по клеткам;
- фрустум куллинг по каждой травинке;
- для полигональной травы &mdash; уровни детализации (кол-во полигонов в травинке уменьшается с расстоянием).

Чем больше травы нарисуете &mdash; тем больше баллов получите.
Не забудьте глянуть видео о траве в Ghost of Tsushima, ссылка ниже.

## Бонус

Сделайте реалистичную модель освещения для травы.
Обязательно учитывать транслюсентность и physically-based спекулярную составляющую.
В случае billboard травы вам придётся поискать PBR текстуры для них.
В случае процедурных мешей травинок &mdash; сгенерируйте все необходимые данные процедурно: нормали "заворачивайте" на краях травинки, транслюсентность уменьшите на центральной "жилке" травинки, шершавость оставьте константной, металлом трава не является.

## Полезные материалы

1. https://www.youtube.com/watch?v=Ibe1JBF5i5Y &mdash; отрисовка травы в Ghost of Tsushima
