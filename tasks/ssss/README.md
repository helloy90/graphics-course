# Подповерхностное рассеивание

В этой домашке нам предстоит научится очередному "фокусу" для лучшей эмуляции реальности.

## Перед началом

 1. Скопируйте в эту папку любой семпл уже рисующий что-то, обязательно имеющее карту теней.
 2. Пролистайте первую ссылку из "полезных материалов".

## Задание

Реализуйте технику подповерхностного рассеивания в экранном пространстве.
Обязательно сделайте галочку включающую/выключающую SS.

В базовом варианте требуется аккуратно разблюрить те пиксели картинки, материал которых обладает подповерхностным рассеиванием.
Иначе говоря, учитывать только отражение, но не трансмиссию.
При наличии дефереда это делается при помощи отведения нескольких бит G-буфера под тип материала.
Если его у вас нет, то придётся хитрить и рисовать во второй рендер-таргет или стенсил-буфер "маску" объектов подверженных SS одновременно с рендерингом соответствующих объектов.

## Бонусный уровень

Реализуйте что угодно из следующих пунктов:

 1. Учёт трансмиссии.
    Точкой входа луча будет точка мирового пространстве восстановленная из обычного буфера глубины, координат пикселя и матрицы камеры, а точкой выхода &mdash; аналогичная точка восстановленная из карты теней.
    Чем дальше расстояние между этими точками, тем меньше света пройдёт объект "насквозь".
 2. Сепарабильный блюр в 2 прохода.
 3. Попробуйте привязать SS к данным glTF модели, включая его только на определённых материалах.
 4. Найдите модель человека и рендерьте её, делая SS только для кожи.
 5. Сделайте ваш SS более physically-based учитывая физические параметры материалов.

## Полезные материалы

 1. https://therealmjp.github.io/posts/sss-intro/ &mdash; статья от MJP про SSS
